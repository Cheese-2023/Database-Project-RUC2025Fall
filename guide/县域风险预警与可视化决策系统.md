# 县域风险预警与可视化决策系统
---

## 一、系统场景与用户角色设计

### 1. 主要应用场景（业务场景）

#### 1.1 风险监测与预警
- **多维度数据采集**：系统定期聚合县域面板指标，包括：
  - 经济维度：GDP、产业结构、财政收支、投资消费等
  - 社会维度：人口变化、就业状况、收入水平、教育卫生等
  - 环境维度：污染排放、空气质量、生态保护等
  - 治理维度：基础设施、公共服务、行政效能等
  - 发展维度：创新能力、产业升级、可持续发展等

- **智能风险评估**：
  - 基于多维度指标自动计算风险得分（经济风险、社会风险、环境风险、治理风险、发展风险）
  - 综合风险得分采用加权融合算法（经济35%、社会25%、环境15%、治理15%、发展10%）
  - 风险等级分类：低风险、中低风险、中风险、中高风险、高风险

- **预警触发机制**：
  - 系统检测异常或下行风险（基于算法模型 + 预警规则）
  - 生成四级预警（绿色、黄色、橙色、红色）
  - 预警通过仪表盘可视化展现，同时生成告警记录供历史回顾

#### 1.2 指标趋势分析
- **单县纵向分析**：查看某县按年份的关键指标趋势（GDP增长率、人口变化、财政状况等）
- **多县横向对比**：支持不同县域的同期指标对比分析
- **区域对标分析**：同类县域（发达/欠发达）的标杆对比
- **风险传导分析**：分析风险在不同维度间的传导路径

#### 1.3 规则与策略管理
- **规则定义管理**：
  - 专家或管理员可以定义/编辑预警规则
  - 支持复杂条件表达式（如：GDP连续3年负增长且当年增长率<-5%）
  - 定义规则触发条件、优先级、权重
  
- **规则类型**：
  - 经济预警规则：GDP连续下降、财政收支失衡、产业结构恶化等
  - 社会预警规则：人口大幅流失、就业严重不足、收入差距扩大等
  - 环境预警规则：环境严重污染、生态质量下降等
  - 综合预警规则：多维度风险综合触发

#### 1.4 告警审核与解释
- **告警审核流程**：
  - 系统根据模型和规则生成告警后，分析师/专家可以审核
  - 支持告警的确认、驳回、补充说明
  
- **可解释性支持**：
  - 提供风险分数明细（各维度得分及贡献度）
  - 展示触发规则及触发原因
  - 显示关键指标的异常值和历史对比
  - 生成预警解释报告

#### 1.5 数据质量管理
- **数据完整性检查**：
  - 检测必填字段缺失
  - 验证关键统计表的数据完整性
  
- **数据一致性校验**：
  - 检查逻辑关系（如：农村人口≤总人口）
  - 验证产业结构总和（三次产业增加值之和≈GDP）
  
- **数据准确性监控**：
  - 检测异常值（如人均GDP异常高低）
  - 标记可疑数据并提示人工审核
  
- **数据质量追踪**：
  - 记录数据质量问题及处理状态
  - 支持数据修正和版本管理

#### 1.6 用户管理与权限控制
- 不同角色登录后看到不同内容与操作权限
- 基于角色的访问控制（RBAC）
- 操作审计日志记录

#### 1.7 数据维护与ETL
- **数据导入**：
  - 后端定期导入/更新县域统计数据
  - 支持批量导入（CSV、Excel）
  - 数据格式验证和转换
  
- **数据维护**：
  - 支持对异常数据进行标记、修正
  - 人工审核数据质量
  - 历史数据补录和更新

### 2. 用户角色（Actors）及其职责

| 角色 | 描述/典型身份 | 主要功能/操作 | 系统权限 |
|------|--------------|-------------|----------|
| **系统管理员**<br>(Admin) | 系统运维人员、项目负责人 | • 管理用户账号和权限<br>• 管理系统配置信息<br>• 监控系统运行状态<br>• 维护基础数据（县域基础信息、行政区划等） | 完全权限 |
| **风险分析专家**<br>(Risk Analyst) | 政府决策者、经济分析师、扶贫专家 | • 定义/调整预警规则<br>• 审核和确认告警<br>• 查看模型输出（风险解释、贡献度）<br>• 导出分析报表<br>• 提供决策建议 | 规则管理、告警审核、完整数据查看 |
| **数据管理员**<br>(Data Manager) | 数据管理员、统计局工作人员 | • 导入年度县域面板数据<br>• 数据清洗与校验<br>• 处理数据质量问题（缺失、异常）<br>• 数据修正和补录 | 数据导入、数据修改、数据质量管理 |
| **决策者/领导**<br>(Decision Maker) | 政府主管领导、部门负责人 | • 查看风险预警大屏<br>• 查看关键指标趋势<br>• 查看县域对比分析<br>• 接收预警通知<br>• 导出决策报告 | 只读权限、报表导出 |
| **普通查看用户**<br>(Viewer) | 政府工作人员、公众/媒体（视权限开放） | • 查看仪表盘、趋势图、地图<br>• 接收告警摘要<br>• 导出公共报表（基于权限） | 基础查看权限 |
| **审计员**<br>(Auditor) | 第三方审计者、监督部门 | • 审计历史告警记录<br>• 审计用户操作日志<br>• 审计数据变更日志<br>• 生成审计报告 | 日志查看、审计报告生成 |

---

## 二、E-R 模型（概念设计）

### 1. 核心实体与属性（Entities）

#### 1.1 基础信息实体

**1. County（县域基础信息）**
- **主键**：county_code（县代码）
- **属性**：
  - county_name（县名称）
  - city_name（城市名称）
  - province_name（省份名称）
  - region_code（区域划分代码：东部/中部/西部）
  - development_level（发展水平：发达/中等发达/欠发达/贫困）
  - land_area_km2（土地面积）
  - administrative_level（行政级别：县级市/县/区/自治县）
  - created_at, updated_at（时间戳）

**2. AdministrativeStructure（行政区划结构）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year（年份）
  - townships_total（乡及镇总数）
  - townships_rural（乡个数）
  - townships_urban（镇个数）
  - street_offices（街道办事处个数）
  - village_committees（村民委员会个数）

#### 1.2 统计数据实体（13个业务表）

**3. PopulationStatistics（人口统计）**
- **主键**：id
- **外键**：county_code → County
- **复合唯一键**：(county_code, year)
- **属性**：
  - year, total_households, rural_households
  - total_population_万, rural_population_万
  - registered_population_万, population_density
  - urbanization_rate（城镇化率）

**4. EmploymentStatistics（就业统计）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, unit_employees_total, urban_employees_total
  - rural_employees_total, agriculture_employees
  - secondary_industry_employees, tertiary_industry_employees
  - employment_rate（就业率）

**5. EconomicAggregate（经济总量）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, gdp_万元, primary_industry_万元
  - secondary_industry_万元, industrial_value_万元
  - tertiary_industry_万元, agriculture_value_万元
  - gdp_per_capita, gdp_growth_rate
  - industry_structure_1/2/3（产业结构比重）

**6. FiscalFinance（财政金融）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, fiscal_revenue_万元, tax_revenue_万元
  - fiscal_expenditure_万元, savings_balance_万元
  - loan_balance_万元, fiscal_self_sufficiency（财政自给率）
  - debt_to_revenue_ratio（债务收入比）

**7. AgricultureProduction（农业生产）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, crop_area_千公顷, cultivated_area_公顷
  - mechanized_area_公顷, facility_agriculture_公顷
  - agricultural_machinery_万千瓦, grain_production_吨
  - cotton_production_吨, oil_production_吨, meat_production_吨
  - agriculture_output_万元, mechanization_rate

**8. IndustryDevelopment（工业发展）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, large_industrial_enterprises
  - industrial_output_万元, export_amount_美元
  - foreign_investment_美元, industrial_concentration

**9. Infrastructure（基础设施）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, fixed_phones, mobile_phones, broadband_users
  - power_consumption_万千瓦时, residential_power_万千瓦时
  - digital_penetration_rate

**10. InvestmentConsumption（投资消费）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, urban_fixed_investment_万元
  - total_fixed_investment_万元, retail_sales_万元
  - real_estate_investment_亿元, investment_efficiency

**11. EducationHealth（教育卫生）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, primary_schools, middle_schools
  - primary_teachers, middle_teachers
  - primary_students, middle_students, vocational_students
  - hospital_beds, health_workers, doctors
  - welfare_institutions, welfare_beds
  - education_investment_万元, health_investment_万元

**12. IncomeLivingStandard（收入与生活水平）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, urban_average_wage, urban_disposable_income
  - rural_disposable_income, income_gap_ratio
  - poverty_incidence, engel_coefficient

**13. EnvironmentCulture（环境与文化）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, green_coverage_rate, parks_green_area_公顷
  - air_quality_index, pm25_concentration
  - pollutant_emission_intensity_吨平方公里
  - libraries, cultural_centers, museums

#### 1.3 风险评估实体

**14. EconomicGrowthRisk（经济增长风险）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, gdp_growth_rate_3yr_avg（三年平均增长率）
  - gdp_growth_volatility（增长波动性）
  - gdp_decline_years（连续下降年数）
  - gdp_growth_risk_score（风险得分）
  - industry_structure_risk_score（产业结构风险）

**15. FiscalRiskAssessment（财政风险评估）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, fiscal_self_sufficiency（财政自给率）
  - debt_to_revenue_ratio（债务收入比）
  - fiscal_growth_rate（财政收入增长率）
  - fiscal_self_sufficiency_risk（自给率风险得分）
  - debt_risk_score（债务风险得分）

**16. PopulationRiskAssessment（人口风险评估）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, population_growth_rate（人口增长率）
  - population_decline_years（连续下降年数）
  - aging_coefficient（老龄化系数）
  - population_decline_risk（人口流失风险）
  - urbanization_risk_score（城镇化风险）

**17. EmploymentRiskAssessment（就业风险评估）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, employment_rate, employment_decline_years
  - employment_rate_risk, employment_structure_risk

**18. EnvironmentRiskAssessment（环境风险评估）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - year, air_quality_index, pm25_concentration
  - emission_intensity, air_quality_risk, emission_intensity_risk

**19. ComprehensiveRiskAssessment（综合风险评估）**
- **主键**：id
- **外键**：county_code → County
- **复合唯一键**：(county_code, year)
- **属性**：
  - year
  - economic_risk_score（经济风险得分，权重35%）
  - social_risk_score（社会风险得分，权重25%）
  - environment_risk_score（环境风险得分，权重15%）
  - governance_risk_score（治理风险得分，权重15%）
  - development_risk_score（发展风险得分，权重10%）
  - comprehensive_risk_score（综合风险得分，加权平均）
  - risk_level（风险等级：低风险/中低风险/中风险/中高风险/高风险）
  - risk_trend（风险趋势：上升/稳定/下降）
  - assessment_date（评估时间）

#### 1.4 预警管理实体

**20. AlertRule（预警规则）**
- **主键**：rule_id
- **外键**：created_by → User
- **属性**：
  - rule_name（规则名称）
  - risk_category（风险类别：经济预警/社会预警/环境预警/综合预警）
  - rule_expression（规则表达式）
  - red_threshold（红色预警阈值，0-1）
  - yellow_threshold（黄色预警阈值，0-1）
  - green_threshold（绿色预警阈值，0-1）
  - rule_description（规则说明）
  - priority（优先级）
  - status（状态：启用/禁用）
  - created_at, updated_at

**21. Alert（预警记录）**
- **主键**：alert_id
- **外键**：
  - county_code → County
  - risk_score_id → ComprehensiveRiskAssessment
  - reviewed_by → User
- **属性**：
  - county_code, year
  - risk_level（预警级别：GREEN/YELLOW/ORANGE/RED）
  - alert_title（预警标题）
  - alert_description（预警描述）
  - triggered_by_rule（触发规则，多规则用逗号分隔）
  - risk_explanation（风险解释）
  - suggested_actions（建议措施）
  - created_at（创建时间）
  - reviewed_by（审核人）
  - reviewed_at（审核时间）
  - review_status（审核状态：待审核/已确认/已驳回）
  - review_comment（审核意见）

**22. AlertRuleTrigger（预警规则触发关联）**
- **复合主键**：(alert_id, rule_id)
- **外键**：
  - alert_id → Alert
  - rule_id → AlertRule
- **属性**：
  - trigger_value（触发时的实际值）
  - threshold_value（阈值）
  - triggered_at（触发时间）

#### 1.5 系统管理实体

**23. User（系统用户）**
- **主键**：user_id
- **属性**：
  - username（用户名，唯一）
  - password_hash（密码哈希）
  - full_name（真实姓名）
  - role（角色：ADMIN/RISK_ANALYST/DATA_MANAGER/DECISION_MAKER/VIEWER/AUDITOR）
  - email（邮箱）
  - phone（电话）
  - department（所属部门）
  - status（状态：激活/禁用）
  - last_login（最后登录时间）
  - created_at, updated_at

**24. DataQualityCheck（数据质量检查）**
- **主键**：id
- **外键**：county_code → County
- **属性**：
  - table_name（表名）
  - county_code, year
  - check_type（检查类型：完整性/一致性/准确性/时效性）
  - issue_description（问题描述）
  - severity（严重程度：严重/中等/轻微）
  - status（状态：待处理/处理中/已解决）
  - detected_at（检测时间）
  - resolved_at（解决时间）

**25. DataOperationLog（数据操作日志）**
- **主键**：log_id
- **外键**：
  - county_code → County
  - user_id → User
- **属性**：
  - county_code, year
  - table_name（操作的表名）
  - operation_type（操作类型：INSERT/UPDATE/DELETE）
  - old_values（修改前的值，JSON格式）
  - new_values（修改后的值，JSON格式）
  - changed_fields（变更字段列表）
  - timestamp（操作时间）
  - user_id（操作用户）
  - ip_address（操作IP）
  - comment（操作说明）

**26. SystemAuditLog（系统审计日志）**
- **主键**：log_id
- **外键**：user_id → User
- **属性**：
  - user_id（操作用户）
  - action_type（操作类型：登录/登出/查询/导出/配置修改等）
  - action_description（操作描述）
  - affected_resources（影响的资源）
  - result（结果：成功/失败）
  - ip_address（IP地址）
  - timestamp（时间戳）

### 2. 实体之间的联系（Relationships）

#### 2.1 基础关系
1. **County ← (1:N) → AdministrativeStructure**
   - 每个县对应多年的行政区划结构数据

2. **County ← (1:N) → [13个统计表]**
   - 每个县对应多年的各类统计数据
   - PopulationStatistics, EmploymentStatistics, EconomicAggregate, FiscalFinance
   - AgricultureProduction, IndustryDevelopment, Infrastructure, InvestmentConsumption
   - EducationHealth, IncomeLivingStandard, EnvironmentCulture

#### 2.2 风险评估关系
3. **County ← (1:N) → [5个风险评估表]**
   - 每个县对应多年的各维度风险评估
   - EconomicGrowthRisk, FiscalRiskAssessment, PopulationRiskAssessment
   - EmploymentRiskAssessment, EnvironmentRiskAssessment

4. **[统计表] → (计算) → [风险评估表]**
   - 统计数据通过计算生成风险评估结果
   - 例如：EconomicAggregate + FiscalFinance → EconomicGrowthRisk + FiscalRiskAssessment

5. **[风险评估表] → (聚合) → ComprehensiveRiskAssessment**
   - 各维度风险通过加权融合生成综合风险评估
   - 关系类型：多对一（每年每县的多个维度风险 → 一个综合风险）

#### 2.3 预警管理关系
6. **ComprehensiveRiskAssessment ← (1:N) → Alert**
   - 每个综合风险评估可能触发多个预警记录
   - 关系：一个风险评估 → 多个历史预警（规则变更、重新评估）

7. **AlertRule ← (N:M) → Alert （通过AlertRuleTrigger）**
   - 多对多关系：一条规则可触发多个预警，一个预警可由多条规则触发
   - 中间表AlertRuleTrigger记录触发详情

8. **User ← (1:N) → Alert**
   - 审核关系：一个用户可以审核多个预警
   - 外键：Alert.reviewed_by → User.user_id

9. **User ← (1:N) → AlertRule**
   - 创建关系：一个用户可以创建多个规则
   - 外键：AlertRule.created_by → User.user_id

#### 2.4 系统管理关系
10. **User ← (1:N) → DataOperationLog**
    - 一个用户可以产生多条数据操作日志

11. **User ← (1:N) → SystemAuditLog**
    - 一个用户可以产生多条系统审计日志

12. **County ← (1:N) → DataQualityCheck**
    - 每个县的数据可以有多条质量检查记录

13. **County ← (1:N) → DataOperationLog**
    - 每个县的数据可以有多条操作日志

### 3. 完整E-R图（层次结构）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         第一层：基础信息层                                      │
└─────────────────────────────────────────────────────────────────────────────┘
                    ┌──────────────────────┐
                    │      County          │ (核心实体)
                    │  县域基础信息表         │
                    ├──────────────────────┤
                    │ county_code PK       │
                    │ county_name          │
                    │ province_name        │
                    │ development_level    │
                    │ land_area_km2        │
                    └──────────┬───────────┘
                               │ 1
                               │
                ┌──────────────┼──────────────┐
                │              │              │
                │ N            │ N            │ N
┌───────────────▼──┐  ┌────────▼────────┐  ┌─▼──────────────────┐
│Administrative    │  │  User           │  │DataQualityCheck    │
│Structure         │  │  系统用户        │  │数据质量检查         │
│行政区划结构       │  ├─────────────────┤  └────────────────────┘
└──────────────────┘  │ user_id PK      │
                      │ username        │
                      │ role            │
                      │ department      │
                      └────┬──────┬─────┘
                           │ 1    │ 1
                           │      │
                           │ N    │ N
                  ┌────────▼──┐  ┌▼───────────────┐
                  │AlertRule  │  │DataOperationLog│
                  │预警规则    │  │SystemAuditLog  │
                  └───────────┘  │操作/审计日志    │
                                 └────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                    第二层：统计数据层（13个业务表）                              │
└─────────────────────────────────────────────────────────────────────────────┘
                    ┌──────────────┐
                    │   County     │
                    └──────┬───────┘
                           │ 1
             ┌─────────────┼─────────────┐
             │             │             │
             │ N           │ N           │ N
┌────────────▼──────┐ ┌───▼──────────┐ ┌▼─────────────────┐
│Population         │ │Employment    │ │EconomicAggregate │
│Statistics         │ │Statistics    │ │经济总量           │
│人口统计           │ │就业统计       │ └──────────────────┘
└───────────────────┘ └──────────────┘
             │             │             │
             │ N           │ N           │ N
┌────────────▼──────┐ ┌───▼──────────┐ ┌▼─────────────────┐
│FiscalFinance      │ │Agriculture   │ │Industry          │
│财政金融           │ │Production    │ │Development       │
└───────────────────┘ │农业生产       │ │工业发展          │
                      └──────────────┘ └──────────────────┘
             │             │             │
             │ N           │ N           │ N
┌────────────▼──────┐ ┌───▼──────────┐ ┌▼─────────────────┐
│Infrastructure     │ │Investment    │ │EducationHealth   │
│基础设施           │ │Consumption   │ │教育卫生          │
└───────────────────┘ │投资消费       │ └──────────────────┘
                      └──────────────┘
             │             │
             │ N           │ N
┌────────────▼──────┐ ┌───▼──────────────┐
│IncomeLiving       │ │EnvironmentCulture│
│Standard           │ │环境与文化         │
│收入与生活水平     │ └──────────────────┘
└───────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                   第三层：风险评估层（5个风险评估表）                            │
└─────────────────────────────────────────────────────────────────────────────┘
    [统计数据层] ───计算───> [风险评估层]
    
┌────────────────┐     ┌────────────────┐     ┌────────────────┐
│EconomicGrowth  │     │FiscalRisk      │     │PopulationRisk  │
│Risk            │     │Assessment      │     │Assessment      │
│经济增长风险     │     │财政风险评估     │     │人口风险评估     │
└────────────────┘     └────────────────┘     └────────────────┘
                              │
┌────────────────┐     ┌──────▼─────────┐
│EmploymentRisk  │     │Environment     │
│Assessment      │     │RiskAssessment  │
│就业风险评估     │     │环境风险评估     │
└────────────────┘     └────────────────┘
        │                      │
        └──────────┬───────────┘
                   │ 聚合（加权）
                   │
           ┌───────▼────────────┐
           │Comprehensive       │
           │RiskAssessment      │
           │综合风险评估         │
           ├────────────────────┤
           │ economic_risk 35%  │
           │ social_risk 25%    │
           │ environment_risk15%│
           │ governance_risk15% │
           │ development_risk10%│
           │ → comprehensive    │
           └───────┬────────────┘
                   │ 1
                   │
                   │ N

┌─────────────────────────────────────────────────────────────────────────────┐
│                        第四层：预警管理层                                       │
└─────────────────────────────────────────────────────────────────────────────┘
           ┌───────────────────┐
           │Comprehensive      │
           │RiskAssessment     │
           └───────┬───────────┘
                   │ 1
                   │
                   │ N
           ┌───────▼───────────┐
           │     Alert         │ ◄────┐
           │   预警记录         │      │
           ├───────────────────┤      │ N
           │ alert_id PK       │      │
           │ county_code FK    │      │
           │ year              │      │
           │ risk_level        │      │
           │ alert_title       │      │
           │ alert_description │      │
           │ triggered_by_rule │      │
           │ reviewed_by FK    │      │
           │ review_status     │      │
           └────┬──────────────┘      │
                │                     │
                │ N                   │
                │                     │
         ┌──────▼─────────┐          │
         │AlertRule       │          │
         │Trigger         ├──────────┘
         │预警规则触发关联 │ N
         ├────────────────┤
         │ alert_id FK    │
         │ rule_id FK     │
         │ trigger_value  │
         │ threshold_value│
         └────────────────┘
                │
                │ N
                │
         ┌──────▼─────────┐
         │  AlertRule     │
         │  预警规则       │
         ├────────────────┤
         │ rule_id PK     │
         │ rule_name      │
         │ risk_category  │
         │ rule_expression│
         │ red_threshold  │
         │ yellow_threshold│
         │ green_threshold│
         │ priority       │
         │ status         │
         │ created_by FK  │
         └────────────────┘
```

### 4. 关键关系说明

#### 4.1 数据流向
```
原始数据 → 统计表 → 风险评估表 → 综合风险 → 预警规则匹配 → 预警记录
```

#### 4.2 计算逻辑
- **统计表 → 风险评估表**：通过存储过程和触发器自动计算
- **风险评估表 → 综合风险**：加权融合算法
- **综合风险 → 预警**：规则引擎匹配

#### 4.3 审计追踪
- 所有数据修改 → DataOperationLog
- 所有系统操作 → SystemAuditLog
- 数据质量问题 → DataQualityCheck

---

## 三、关系模式设计（逻辑设计）

### 1. 基础信息模式

**1. County (县域基础信息)**
```
County (
    county_code VARCHAR(10) PRIMARY KEY,
    county_name VARCHAR(100) NOT NULL,
    city_name VARCHAR(100),
    province_name VARCHAR(100),
    region_code VARCHAR(10),
    development_level ENUM('发达', '中等发达', '欠发达', '贫困'),
    land_area_km2 DECIMAL(10,2),
    administrative_level ENUM('县级市', '县', '区', '自治县'),
    created_at TIMESTAMP,
    updated_at TIMESTAMP
)
```

**2. AdministrativeStructure (行政区划结构)**
```
AdministrativeStructure (
    id INT PRIMARY KEY AUTO_INCREMENT,
    county_code VARCHAR(10) FOREIGN KEY REFERENCES County(county_code),
    year YEAR,
    townships_total INT,
    townships_rural INT,
    townships_urban INT,
    street_offices INT,
    village_committees INT,
    UNIQUE KEY (county_code, year)
)
```

### 2. 统计数据模式（13个表）

**3. PopulationStatistics (人口统计)**
```
PopulationStatistics (
    id INT PRIMARY KEY AUTO_INCREMENT,
    county_code VARCHAR(10) FOREIGN KEY REFERENCES County(county_code),
    year YEAR,
    total_households INT,
    rural_households INT,
    total_population_万 DECIMAL(8,2),
    rural_population_万 DECIMAL(8,2),
    registered_population_万 DECIMAL(8,2),
    population_density DECIMAL(8,2),
    urbanization_rate DECIMAL(5,2),
    UNIQUE KEY (county_code, year)
)
```

**4. EmploymentStatistics (就业统计)**
```
EmploymentStatistics (
    id INT PRIMARY KEY AUTO_INCREMENT,
    county_code VARCHAR(10) FOREIGN KEY REFERENCES County(county_code),
    year YEAR,
    unit_employees_total INT,
    urban_employees_total INT,
    rural_employees_total INT,
    agriculture_employees INT,
    secondary_industry_employees INT,
    tertiary_industry_employees INT,
    employment_rate DECIMAL(5,2),
    UNIQUE KEY (county_code, year)
)
```

**5. EconomicAggregate (经济总量)**
```
EconomicAggregate (
    id INT PRIMARY KEY AUTO_INCREMENT,
    county_code VARCHAR(10) FOREIGN KEY REFERENCES County(county_code),
    year YEAR,
    gdp_万元 BIGINT,
    primary_industry_万元 BIGINT,
    secondary_industry_万元 BIGINT,
    industrial_value_万元 BIGINT,
    tertiary_industry_万元 BIGINT,
    agriculture_value_万元 BIGINT,
    livestock_value_万元 BIGINT,
    gdp_per_capita DECIMAL(10,2),
    gdp_growth_rate DECIMAL(5,2),
    industry_structure_1 DECIMAL(5,2),
    industry_structure_2 DECIMAL(5,2),
    industry_structure_3 DECIMAL(5,2),
    UNIQUE KEY (county_code, year)
)
```

**6-13. [其他统计表]**
- FiscalFinance (财政金融)
- AgricultureProduction (农业生产)
- IndustryDevelopment (工业发展)
- Infrastructure (基础设施)
- InvestmentConsumption (投资消费)
- EducationHealth (教育卫生)
- IncomeLivingStandard (收入与生活水平)
- EnvironmentCulture (环境与文化)

*（结构类似，参考详细建表脚本）*

### 3. 风险评估模式

**14. EconomicGrowthRisk (经济增长风险)**
```
EconomicGrowthRisk (
    id INT PRIMARY KEY AUTO_INCREMENT,
    county_code VARCHAR(10) FOREIGN KEY REFERENCES County(county_code),
    year YEAR,
    gdp_growth_rate_3yr_avg DECIMAL(5,2),
    gdp_growth_volatility DECIMAL(5,2),
    gdp_decline_years INT,
    gdp_growth_risk_score DECIMAL(8,4),
    industry_structure_risk_score DECIMAL(8,4),
    UNIQUE KEY (county_code, year)
)
```

**15-18. [其他风险评估表]**
- FiscalRiskAssessment (财政风险评估)
- PopulationRiskAssessment (人口风险评估)
- EmploymentRiskAssessment (就业风险评估)
- EnvironmentRiskAssessment (环境风险评估)

**19. ComprehensiveRiskAssessment (综合风险评估)**
```
ComprehensiveRiskAssessment (
    id INT PRIMARY KEY AUTO_INCREMENT,
    county_code VARCHAR(10) FOREIGN KEY REFERENCES County(county_code),
    year YEAR,
    economic_risk_score DECIMAL(8,4),
    social_risk_score DECIMAL(8,4),
    environment_risk_score DECIMAL(8,4),
    governance_risk_score DECIMAL(8,4),
    development_risk_score DECIMAL(8,4),
    comprehensive_risk_score DECIMAL(8,4),
    risk_level ENUM('低风险', '中低风险', '中风险', '中高风险', '高风险'),
    risk_trend ENUM('上升', '稳定', '下降'),
    assessment_date TIMESTAMP,
    UNIQUE KEY (county_code, year)
)
```

### 4. 预警管理模式

**20. AlertRule (预警规则)**
```
AlertRule (
    rule_id INT PRIMARY KEY AUTO_INCREMENT,
    rule_name VARCHAR(200) NOT NULL,
    risk_category ENUM('经济预警', '社会预警', '环境预警', '治理预警', '综合预警'),
    rule_expression TEXT,
    red_threshold DECIMAL(5,4),
    yellow_threshold DECIMAL(5,4),
    green_threshold DECIMAL(5,4),
    rule_description TEXT,
    priority INT,
    status ENUM('启用', '禁用'),
    created_by INT FOREIGN KEY REFERENCES User(user_id),
    created_at TIMESTAMP,
    updated_at TIMESTAMP
)
```

**21. Alert (预警记录)**
```
Alert (
    alert_id INT PRIMARY KEY AUTO_INCREMENT,
    county_code VARCHAR(10) FOREIGN KEY REFERENCES County(county_code),
    year YEAR,
    risk_score_id INT FOREIGN KEY REFERENCES ComprehensiveRiskAssessment(id),
    risk_level ENUM('GREEN', 'YELLOW', 'ORANGE', 'RED'),
    alert_title VARCHAR(500),
    alert_description TEXT,
    triggered_by_rule VARCHAR(500),
    risk_explanation TEXT,
    suggested_actions TEXT,
    created_at TIMESTAMP,
    reviewed_by INT FOREIGN KEY REFERENCES User(user_id),
    reviewed_at TIMESTAMP,
    review_status ENUM('待审核', '已确认', '已驳回'),
    review_comment TEXT
)
```

**22. AlertRuleTrigger (预警规则触发关联)**
```
AlertRuleTrigger (
    alert_id INT FOREIGN KEY REFERENCES Alert(alert_id),
    rule_id INT FOREIGN KEY REFERENCES AlertRule(rule_id),
    trigger_value DECIMAL(10,2),
    threshold_value DECIMAL(10,2),
    triggered_at TIMESTAMP,
    PRIMARY KEY (alert_id, rule_id)
)
```

### 5. 系统管理模式

**23. User (系统用户)**
```
User (
    user_id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    password_hash VARCHAR(255),
    full_name VARCHAR(100),
    role ENUM('ADMIN', 'RISK_ANALYST', 'DATA_MANAGER', 'DECISION_MAKER', 'VIEWER', 'AUDITOR'),
    email VARCHAR(100),
    phone VARCHAR(20),
    department VARCHAR(100),
    status ENUM('激活', '禁用'),
    last_login TIMESTAMP,
    created_at TIMESTAMP,
    updated_at TIMESTAMP
)
```

**24. DataQualityCheck (数据质量检查)**
```
DataQualityCheck (
    id INT PRIMARY KEY AUTO_INCREMENT,
    table_name VARCHAR(100),
    county_code VARCHAR(10) FOREIGN KEY REFERENCES County(county_code),
    year YEAR,
    check_type ENUM('完整性', '一致性', '准确性', '时效性'),
    issue_description TEXT,
    severity ENUM('严重', '中等', '轻微'),
    status ENUM('待处理', '处理中', '已解决'),
    detected_at TIMESTAMP,
    resolved_at TIMESTAMP
)
```

**25. DataOperationLog (数据操作日志)**
```
DataOperationLog (
    log_id INT PRIMARY KEY AUTO_INCREMENT,
    county_code VARCHAR(10) FOREIGN KEY REFERENCES County(county_code),
    year YEAR,
    table_name VARCHAR(100),
    operation_type ENUM('INSERT', 'UPDATE', 'DELETE'),
    old_values TEXT,
    new_values TEXT,
    changed_fields VARCHAR(500),
    timestamp TIMESTAMP,
    user_id INT FOREIGN KEY REFERENCES User(user_id),
    ip_address VARCHAR(50),
    comment TEXT
)
```

**26. SystemAuditLog (系统审计日志)**
```
SystemAuditLog (
    log_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT FOREIGN KEY REFERENCES User(user_id),
    action_type VARCHAR(50),
    action_description TEXT,
    affected_resources VARCHAR(500),
    result ENUM('成功', '失败'),
    ip_address VARCHAR(50),
    timestamp TIMESTAMP
)
```

---

## 四、规范化分析与设计权衡

### 1. 规范化程度分析

#### 1.1 满足第一范式 (1NF)
✅ **所有表都满足1NF**：
- 每个字段都是原子的（不可再分）
- 没有重复组
- 每个表都有主键

#### 1.2 满足第二范式 (2NF)
✅ **所有表都满足2NF**：
- 消除了部分函数依赖
- 所有非主属性完全依赖于主键
- 例如：在统计表中，所有指标都完全依赖于 (county_code, year)

#### 1.3 满足第三范式 (3NF)
✅ **大部分表满足3NF**：
- 消除了传递依赖
- 非主属性不依赖于其他非主属性
- 例如：County 表不存储省份的面积信息，统计表不存储县名称

**部分允许的冗余**（为性能考虑）：
- `EconomicAggregate` 表中同时存储 `gdp_万元` 和 `gdp_per_capita`
  - 虽然人均GDP可以从GDP和人口计算得出
  - 保留是为了避免频繁的表连接查询
  
- `ComprehensiveRiskAssessment` 表存储各维度风险得分
  - 虽然可以从各专项风险表计算
  - 保留是为了快速查询和历史追溯

#### 1.4 部分满足 BCNF (Boyce-Codd Normal Form)
大部分表满足BCNF，因为所有决定因素都是候选键。

### 2. 设计权衡说明

#### 2.1 规范化优势
✅ **数据一致性强**：
- 基础信息集中管理，修改一处即可
- 外键约束保证引用完整性

✅ **存储空间优化**：
- 避免大量重复存储县域基本信息
- 规则和用户信息复用性高

✅ **易于维护**：
- 数据更新操作简单
- 减少数据异常和冗余

#### 2.2 反规范化考虑
⚠️ **性能优化**：
- 某些计算字段直接存储（如 gdp_per_capita）
- 综合风险得分直接存储，避免实时计算

⚠️ **查询便利性**：
- Alert 表存储 triggered_by_rule 文本（而不仅仅是 rule_id）
- 便于快速显示预警信息，无需关联查询

⚠️ **历史追溯**：
- 风险评估表保留历史快照
- 即使原始数据修改，历史评估结果不变

### 3. 完整性约束设计

#### 3.1 实体完整性
- 所有表都有主键 (PRIMARY KEY)
- 唯一性约束确保关键字段不重复

#### 3.2 参照完整性
- 外键约束保证数据一致性
- 级联删除策略（部分表需要）：
  ```sql
  ON DELETE CASCADE -- 删除县时删除所有相关数据
  ON DELETE RESTRICT -- 有预警记录的规则不能删除
  ```

#### 3.3 域完整性
- 枚举类型 (ENUM) 限制字段取值
- CHECK 约束验证数据范围
- NOT NULL 约束保证必填字段

#### 3.4 用户定义完整性
- 触发器 (TRIGGER) 自动计算衍生字段
- 存储过程 (PROCEDURE) 实现复杂业务逻辑
- 数据质量检查规则

### 4. 扩展性设计

#### 4.1 易于扩展的设计
✅ **新增统计指标**：
- 在对应统计表中添加字段即可
- 不影响其他表结构

✅ **新增风险维度**：
- 增加新的风险评估表
- 修改综合风险计算逻辑

✅ **新增预警规则**：
- 在 AlertRule 表中插入新规则
- 无需修改代码

✅ **新增用户角色**：
- 扩展 User 表的 role 枚举
- 实现对应的权限控制

#### 4.2 未来可能的扩展
- **ModelVersion 表**：记录风险评估模型版本
- **CountyGroup 表**：县域分组管理（如贫困县、试点县）
- **RolePermission 表**：更细粒度的权限控制
- **AlertNotification 表**：预警通知推送记录
- **ReportTemplate 表**：报表模板管理

---

## 五、典型业务场景的SQL操作示例

### 1. 数据导入场景

#### 1.1 批量插入年度统计数据
```sql
-- 由数据管理员执行
INSERT INTO EconomicAggregate (
    county_code, year, gdp_万元, primary_industry_万元, 
    secondary_industry_万元, tertiary_industry_万元,
    gdp_per_capita, gdp_growth_rate
) VALUES 
    ('410100', 2023, 12345678, 1234567, 5678901, 5432210, 85234.56, 6.5),
    ('410200', 2023, 9876543, 987654, 4567890, 4320999, 72456.78, 5.8),
    ('410300', 2023, 8765432, 876543, 3456789, 4432100, 68234.90, 5.2);

-- 记录操作日志
INSERT INTO DataOperationLog (
    table_name, operation_type, user_id, timestamp, comment
) VALUES (
    'EconomicAggregate', 'INSERT', 3, NOW(), '导入2023年度经济数据'
);
```

#### 1.2 更新数据并记录变更
```sql
-- 更新GDP数据（发现数据错误）
UPDATE EconomicAggregate 
SET 
    gdp_万元 = 12456789,
    gdp_per_capita = 86000.00,
    updated_at = NOW()
WHERE county_code = '410100' AND year = 2023;

-- 记录详细变更日志
INSERT INTO DataOperationLog (
    county_code, year, table_name, operation_type,
    old_values, new_values, changed_fields,
    user_id, timestamp, comment
) VALUES (
    '410100', 2023, 'EconomicAggregate', 'UPDATE',
    '{"gdp_万元": 12345678, "gdp_per_capita": 85234.56}',
    '{"gdp_万元": 12456789, "gdp_per_capita": 86000.00}',
    'gdp_万元,gdp_per_capita',
    3, NOW(), '修正GDP统计错误'
);
```

### 2. 风险计算场景

#### 2.1 计算经济增长风险
```sql
-- 调用存储过程计算2023年所有县的风险得分
CALL CalculateRiskScores(2023, NULL);

-- 或计算特定县的风险
CALL CalculateRiskScores(2023, '410100');
```

#### 2.2 查询综合风险评估结果
```sql
-- 查询高风险县域
SELECT 
    c.county_name,
    c.province_name,
    cra.year,
    cra.comprehensive_risk_score,
    cra.risk_level,
    cra.economic_risk_score,
    cra.social_risk_score,
    cra.environment_risk_score
FROM ComprehensiveRiskAssessment cra
JOIN County c ON cra.county_code = c.county_code
WHERE cra.year = 2023 
    AND cra.risk_level IN ('高风险', '中高风险')
ORDER BY cra.comprehensive_risk_score DESC;
```

#### 2.3 对比分析同类县域风险
```sql
-- 对比欠发达县域的风险状况
SELECT 
    c.county_name,
    c.development_level,
    cra.comprehensive_risk_score,
    cra.risk_level,
    ea.gdp_per_capita,
    ps.urbanization_rate
FROM County c
JOIN ComprehensiveRiskAssessment cra ON c.county_code = cra.county_code
JOIN EconomicAggregate ea ON c.county_code = ea.county_code AND cra.year = ea.year
JOIN PopulationStatistics ps ON c.county_code = ps.county_code AND cra.year = ps.year
WHERE c.development_level = '欠发达' 
    AND cra.year = 2023
ORDER BY cra.comprehensive_risk_score DESC
LIMIT 20;
```

### 3. 预警管理场景

#### 3.1 创建预警规则
```sql
-- 管理员创建GDP连续下降预警规则
INSERT INTO AlertRule (
    rule_name, risk_category, rule_expression,
    red_threshold, yellow_threshold, green_threshold,
    rule_description, priority, status, created_by, created_at
) VALUES (
    'GDP连续下降预警',
    '经济预警',
    'GDP连续3年负增长且当年增长率<-5%',
    0.9, 0.7, 0.5,
    '监测GDP持续下降风险，及时发现经济衰退信号',
    1,
    '启用',
    2,
    NOW()
);
```

#### 3.2 生成预警记录
```sql
-- 系统自动生成预警（由预警引擎触发）
INSERT INTO Alert (
    county_code, year, risk_score_id, risk_level,
    alert_title, alert_description, triggered_by_rule,
    risk_explanation, suggested_actions, created_at
) VALUES (
    '410100',
    2023,
    789,
    'RED',
    '【高风险预警】郑州市经济增长持续下滑',
    '该县GDP连续3年负增长，2023年增长率为-6.2%，经济形势严峻',
    'GDP连续下降预警',
    '经济风险得分0.85，主要风险因素：GDP增长率-6.2%（连续3年负增长）、财政自给率28%（低于30%阈值）、产业结构单一',
    '建议：1. 加强招商引资力度 2. 优化产业结构 3. 控制财政支出 4. 实施经济刺激政策',
    NOW()
);

-- 关联触发规则
INSERT INTO AlertRuleTrigger (alert_id, rule_id, trigger_value, threshold_value, triggered_at)
VALUES (101, 5, -6.2, -5.0, NOW());
```

#### 3.3 专家审核预警
```sql
-- 风险分析专家审核并确认预警
UPDATE Alert
SET 
    reviewed_by = 10,
    reviewed_at = NOW(),
    review_status = '已确认',
    review_comment = '确认高风险预警。经核实，该县主要支柱产业受国际市场冲击严重，短期内难以恢复。建议省级部门介入，制定专项扶持政策。'
WHERE alert_id = 101;

-- 记录审核操作到审计日志
INSERT INTO SystemAuditLog (
    user_id, action_type, action_description,
    affected_resources, result, ip_address, timestamp
) VALUES (
    10, 
    '预警审核', 
    '审核并确认高风险预警：郑州市经济增长持续下滑',
    'Alert.alert_id=101',
    '成功',
    '192.168.1.100',
    NOW()
);
```

### 4. 数据查询与分析场景

#### 4.1 查询某县完整风险画像
```sql
-- 查询某县2023年完整风险画像
SELECT 
    c.county_name,
    c.province_name,
    c.development_level,
    -- 综合风险
    cra.comprehensive_risk_score,
    cra.risk_level,
    cra.risk_trend,
    -- 经济指标
    ea.gdp_万元,
    ea.gdp_per_capita,
    ea.gdp_growth_rate,
    ea.industry_structure_1,
    ea.industry_structure_2,
    ea.industry_structure_3,
    -- 财政指标
    ff.fiscal_revenue_万元,
    ff.fiscal_self_sufficiency,
    ff.debt_to_revenue_ratio,
    -- 人口指标
    ps.total_population_万,
    ps.urbanization_rate,
    ps.population_density,
    -- 就业指标
    es.employment_rate,
    -- 环境指标
    ec.air_quality_index,
    ec.green_coverage_rate,
    -- 风险得分明细
    cra.economic_risk_score,
    cra.social_risk_score,
    cra.environment_risk_score,
    cra.governance_risk_score,
    cra.development_risk_score
FROM County c
LEFT JOIN ComprehensiveRiskAssessment cra ON c.county_code = cra.county_code
LEFT JOIN EconomicAggregate ea ON c.county_code = ea.county_code AND cra.year = ea.year
LEFT JOIN FiscalFinance ff ON c.county_code = ff.county_code AND cra.year = ff.year
LEFT JOIN PopulationStatistics ps ON c.county_code = ps.county_code AND cra.year = ps.year
LEFT JOIN EmploymentStatistics es ON c.county_code = es.county_code AND cra.year = es.year
LEFT JOIN EnvironmentCulture ec ON c.county_code = ec.county_code AND cra.year = ec.year
WHERE c.county_code = '410100' AND cra.year = 2023;
```

#### 4.2 查询县域历史风险趋势
```sql
-- 查询某县近5年风险趋势
SELECT 
    year,
    comprehensive_risk_score,
    risk_level,
    economic_risk_score,
    social_risk_score,
    environment_risk_score
FROM ComprehensiveRiskAssessment
WHERE county_code = '410100' 
    AND year BETWEEN 2019 AND 2023
ORDER BY year;
```

#### 4.3 查询全省风险分布
```sql
-- 统计各省风险等级分布
SELECT 
    c.province_name,
    cra.risk_level,
    COUNT(*) as county_count,
    AVG(cra.comprehensive_risk_score) as avg_risk_score
FROM County c
JOIN ComprehensiveRiskAssessment cra ON c.county_code = cra.county_code
WHERE cra.year = 2023
GROUP BY c.province_name, cra.risk_level
ORDER BY c.province_name, cra.risk_level;
```

#### 4.4 查询预警处理情况统计
```sql
-- 统计2023年预警处理情况
SELECT 
    risk_level,
    review_status,
    COUNT(*) as alert_count,
    AVG(TIMESTAMPDIFF(HOUR, created_at, reviewed_at)) as avg_review_hours
FROM Alert
WHERE year = 2023
GROUP BY risk_level, review_status
ORDER BY risk_level, review_status;
```

### 5. 数据质量管理场景

#### 5.1 执行数据质量检查
```sql
-- 调用存储过程检查2023年数据质量
CALL CheckDataQuality(2023);
```

#### 5.2 查询数据质量问题
```sql
-- 查询待处理的严重数据质量问题
SELECT 
    dqc.table_name,
    c.county_name,
    dqc.year,
    dqc.check_type,
    dqc.issue_description,
    dqc.detected_at
FROM DataQualityCheck dqc
JOIN County c ON dqc.county_code = c.county_code
WHERE dqc.status = '待处理' 
    AND dqc.severity = '严重'
ORDER BY dqc.detected_at DESC;
```

#### 5.3 标记质量问题已解决
```sql
-- 数据管理员标记问题已解决
UPDATE DataQualityCheck
SET 
    status = '已解决',
    resolved_at = NOW()
WHERE id = 123;
```

### 6. 用户权限管理场景

#### 6.1 创建新用户
```sql
-- 管理员创建风险分析专家账号
INSERT INTO User (
    username, password_hash, full_name, role,
    email, phone, department, status, created_at
) VALUES (
    'analyst_zhang',
    'hashed_password_here',
    '张三',
    'RISK_ANALYST',
    'zhang@example.com',
    '13800138000',
    '风险管理处',
    '激活',
    NOW()
);
```

#### 6.2 查询用户操作历史
```sql
-- 审计员查询某用户的所有操作记录
SELECT 
    sal.timestamp,
    sal.action_type,
    sal.action_description,
    sal.affected_resources,
    sal.result,
    sal.ip_address
FROM SystemAuditLog sal
WHERE sal.user_id = 10
    AND sal.timestamp >= DATE_SUB(NOW(), INTERVAL 30 DAY)
ORDER BY sal.timestamp DESC;
```

#### 6.3 查询数据修改历史
```sql
-- 查询某县数据的所有修改记录
SELECT 
    dol.timestamp,
    u.username,
    u.full_name,
    dol.table_name,
    dol.operation_type,
    dol.changed_fields,
    dol.comment
FROM DataOperationLog dol
JOIN User u ON dol.user_id = u.user_id
WHERE dol.county_code = '410100'
    AND dol.year = 2023
ORDER BY dol.timestamp DESC;
```

---

## 六、系统实施建议

### 1. 数据库性能优化

#### 1.1 索引设计
```sql
-- 在常用查询字段上创建索引
CREATE INDEX idx_county_province ON County(province_name);
CREATE INDEX idx_risk_level ON ComprehensiveRiskAssessment(risk_level, year);
CREATE INDEX idx_alert_county_year ON Alert(county_code, year);
CREATE INDEX idx_alert_status ON Alert(review_status, created_at);
```

#### 1.2 分区表设计
```sql
-- 对大数据量的统计表按年份分区
ALTER TABLE EconomicAggregate
PARTITION BY RANGE (year) (
    PARTITION p2019 VALUES LESS THAN (2020),
    PARTITION p2020 VALUES LESS THAN (2021),
    PARTITION p2021 VALUES LESS THAN (2022),
    PARTITION p2022 VALUES LESS THAN (2023),
    PARTITION p2023 VALUES LESS THAN (2024),
    PARTITION p_future VALUES LESS THAN MAXVALUE
);
```

### 2. 安全性设计

#### 2.1 敏感数据加密
- 用户密码使用bcrypt哈希存储
- 关键财政数据可考虑列级加密

#### 2.2 访问控制
- 实施基于角色的访问控制（RBAC）
- 数据库层面创建不同权限的用户账号
- 应用层实施细粒度权限验证

#### 2.3 审计追踪
- 所有数据修改都记录到 DataOperationLog
- 所有系统操作都记录到 SystemAuditLog
- 定期归档审计日志

### 3. 备份与恢复策略

#### 3.1 备份策略
- 每日全量备份
- 每小时增量备份
- 关键操作前手动备份

#### 3.2 数据保留策略
- 当前年份数据：在线存储
- 近3年数据：热备份，快速访问
- 3年以上数据：冷备份，归档存储

---

## 七、总结

### 核心优势

1. **完整的数据模型**：涵盖基础信息、统计数据、风险评估、预警管理、系统管理五大模块，共26个实体

2. **科学的风险评估体系**：
   - 多维度风险评估（经济、社会、环境、治理、发展）
   - 加权融合的综合风险模型
   - 历史趋势分析能力

3. **智能的预警机制**：
   - 灵活的规则引擎
   - 多级预警体系（绿/黄/橙/红）
   - 可解释的预警输出

4. **完善的数据质量保障**：
   - 自动化质量检查
   - 完整的审计追踪
   - 版本管理和变更控制

5. **良好的扩展性**：
   - 模块化设计
   - 易于添加新指标和规则
   - 支持业务演进

### 技术特点

- **高度规范化**：满足3NF，部分满足BCNF
- **适度反规范化**：在性能和规范化之间取得平衡
- **完整性约束**：主键、外键、CHECK约束齐全
- **性能优化**：索引、分区、存储过程、触发器

